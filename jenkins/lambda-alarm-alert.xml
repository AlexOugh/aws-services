<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@2.4.0">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <url>https://github.com/SungardAS/aws-services</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>*/develop</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="list"/>
    <extensions/>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <com.cloudbees.jenkins.GitHubPushTrigger plugin="github@1.13.3">
      <spec></spec>
    </com.cloudbees.jenkins.GitHubPushTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>cd lib/google
npm install
cd ../..
zip -r cto_cron_runner.zip alarmalert/index_cron.js alarmalert/json lib/flow_controller.js lib/aws
zip -r email_saver.zip alarmalert/index_saver.js alarmalert/json lib/flow_controller.js lib/aws lib/google</command>
    </hudson.tasks.Shell>
    <com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep plugin="aws-lambda@0.3.1">
      <lambdaUploadBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <artifactLocation>cto_cron_runner.zip</artifactLocation>
        <description>cto_cron_runner</description>
        <functionName>cto_cron_runner</functionName>
        <handler>alarmalert/index_cron.handler</handler>
        <memorySize>128</memorySize>
        <role>arn:aws:iam::089476987273:role/lambda_cron_invoke</role>
        <runtime>nodejs</runtime>
        <timeout>10</timeout>
        <updateMode>code</updateMode>
      </lambdaUploadBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep>
    <com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep plugin="aws-lambda@0.3.1">
      <lambdaInvokeBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <functionName>cto_cron_runner</functionName>
        <payload>{
  &quot;Records&quot;: [
    {
      &quot;EventSource&quot;: &quot;aws:sns&quot;,
      &quot;EventVersion&quot;: &quot;1.0&quot;,
      &quot;EventSubscriptionArn&quot;: &quot;arn:aws:sns:us-east-1:876224653878:CTOCronTopic:54ee549e-6874-4028-9826-09759863b22c&quot;,
      &quot;Sns&quot;: {
        &quot;Type&quot;: &quot;Notification&quot;,
        &quot;MessageId&quot;: &quot;7750e58b-d233-54b4-afb7-abf5bb793b18&quot;,
        &quot;TopicArn&quot;: &quot;arn:aws:sns:us-east-1:876224653878:CTOCronTopic&quot;,
        &quot;Subject&quot;: &quot;ALARM: \&quot;CTOCronAlarm\&quot; in US - N. Virginia&quot;,
        &quot;Message&quot;: &quot;{\&quot;AlarmName\&quot;:\&quot;CTOCronAlarm\&quot;,\&quot;AlarmDescription\&quot;:\&quot;Alerted whenever new message is delivered to &apos;CTOCronQueue&apos;\&quot;,\&quot;AWSAccountId\&quot;:\&quot;876224653878\&quot;,\&quot;NewStateValue\&quot;:\&quot;ALARM\&quot;,\&quot;NewStateReason\&quot;:\&quot;Threshold Crossed: 1 datapoint (1.0) was greater than the threshold (0.0).\&quot;,\&quot;StateChangeTime\&quot;:\&quot;2015-09-24T21:11:38.523+0000\&quot;,\&quot;Region\&quot;:\&quot;US - N. Virginia\&quot;,\&quot;OldStateValue\&quot;:\&quot;OK\&quot;,\&quot;Trigger\&quot;:{\&quot;MetricName\&quot;:\&quot;ApproximateNumberOfMessagesVisible\&quot;,\&quot;Namespace\&quot;:\&quot;AWS/SQS\&quot;,\&quot;Statistic\&quot;:\&quot;AVERAGE\&quot;,\&quot;Unit\&quot;:\&quot;Count\&quot;,\&quot;Dimensions\&quot;:[{\&quot;name\&quot;:\&quot;QueueName\&quot;,\&quot;value\&quot;:\&quot;CTOCronQueue\&quot;}],\&quot;Period\&quot;:60,\&quot;EvaluationPeriods\&quot;:1,\&quot;ComparisonOperator\&quot;:\&quot;GreaterThanThreshold\&quot;,\&quot;Threshold\&quot;:0.0}}&quot;,
        &quot;Timestamp&quot;: &quot;2015-09-24T21:11:38.608Z&quot;,
        &quot;SignatureVersion&quot;: &quot;1&quot;,
        &quot;Signature&quot;: &quot;GK0Ss1kF8xMcHod318S2AQMR39UzlreNkcf+DjWqCoY+Gp2dOGTnuN3wf89QBlxPrEjPK/4JMNvCyfOoz7unH2y0QvELXvt7ToDSK4XE+1YcT2DY0QcFvr5af3TdQTF8e2cB3iBZ93ktt/uAWykj4/nzDSU09+W0nFhQURflmowlAnn5X5Z8icx0G+v+npCTED3fFgA4JnKm2PDqcmUB6Z3d5iIYQmeOGKkIUZbPZ3TtoGubg94OBncpH6F8fsXXvygIZDq9eO4sb5MTGTje7iRiEyCwc6z0evNbWiNeOWp0XGwQRov6ZiNeUW9gxSM192S2Q29PmHC0OejgQZmQiQ==&quot;,
        &quot;SigningCertUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/SimpleNotificationService-bb750dd426d95ee9390147a5624348ee.pem&quot;,
        &quot;UnsubscribeUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=arn:aws:sns:us-east-1:876224653878:CTOCronTopic:54ee549e-6874-4028-9826-09759863b22c&quot;,
        &quot;MessageAttributes&quot;: {}
      }
    }
  ]
}</payload>
        <synchronous>true</synchronous>
      </lambdaInvokeBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep>
    <com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep plugin="aws-lambda@0.3.1">
      <lambdaUploadBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <artifactLocation>email_saver.zip</artifactLocation>
        <description>email_saver</description>
        <functionName>email_saver</functionName>
        <handler>alarmalert/index_saver.handler</handler>
        <memorySize>128</memorySize>
        <role>arn:aws:iam::089476987273:role/lambda_alarmalert_invoke</role>
        <runtime>nodejs</runtime>
        <timeout>60</timeout>
        <updateMode>code</updateMode>
      </lambdaUploadBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep>
    <com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep plugin="aws-lambda@0.3.1">
      <lambdaInvokeBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <functionName>email_saver</functionName>
        <payload>{
  &quot;Records&quot;: [
    {
      &quot;EventSource&quot;: &quot;aws:sns&quot;,
      &quot;EventVersion&quot;: &quot;1.0&quot;,
      &quot;EventSubscriptionArn&quot;: &quot;arn:aws:sns:us-east-1:876224653878:CTOCronTopic:54ee549e-6874-4028-9826-09759863b22c&quot;,
      &quot;Sns&quot;: {
        &quot;Type&quot;: &quot;Notification&quot;,
        &quot;MessageId&quot;: &quot;7750e58b-d233-54b4-afb7-abf5bb793b18&quot;,
        &quot;TopicArn&quot;: &quot;arn:aws:sns:us-east-1:876224653878:CTOCronTopic&quot;,
        &quot;Subject&quot;: &quot;ALARM: \&quot;CTOCronAlarm\&quot; in US - N. Virginia&quot;,
        &quot;Message&quot;: &quot;{\&quot;AlarmName\&quot;:\&quot;CTOCronAlarm\&quot;,\&quot;AlarmDescription\&quot;:\&quot;Alerted whenever new message is delivered to &apos;CTOCronQueue&apos;\&quot;,\&quot;AWSAccountId\&quot;:\&quot;876224653878\&quot;,\&quot;NewStateValue\&quot;:\&quot;ALARM\&quot;,\&quot;NewStateReason\&quot;:\&quot;Threshold Crossed: 1 datapoint (1.0) was greater than the threshold (0.0).\&quot;,\&quot;StateChangeTime\&quot;:\&quot;2015-09-24T21:11:38.523+0000\&quot;,\&quot;Region\&quot;:\&quot;US - N. Virginia\&quot;,\&quot;OldStateValue\&quot;:\&quot;OK\&quot;,\&quot;Trigger\&quot;:{\&quot;MetricName\&quot;:\&quot;ApproximateNumberOfMessagesVisible\&quot;,\&quot;Namespace\&quot;:\&quot;AWS/SQS\&quot;,\&quot;Statistic\&quot;:\&quot;AVERAGE\&quot;,\&quot;Unit\&quot;:\&quot;Count\&quot;,\&quot;Dimensions\&quot;:[{\&quot;name\&quot;:\&quot;QueueName\&quot;,\&quot;value\&quot;:\&quot;CTOCronQueue\&quot;}],\&quot;Period\&quot;:60,\&quot;EvaluationPeriods\&quot;:1,\&quot;ComparisonOperator\&quot;:\&quot;GreaterThanThreshold\&quot;,\&quot;Threshold\&quot;:0.0}}&quot;,
        &quot;Timestamp&quot;: &quot;2015-09-24T21:11:38.608Z&quot;,
        &quot;SignatureVersion&quot;: &quot;1&quot;,
        &quot;Signature&quot;: &quot;GK0Ss1kF8xMcHod318S2AQMR39UzlreNkcf+DjWqCoY+Gp2dOGTnuN3wf89QBlxPrEjPK/4JMNvCyfOoz7unH2y0QvELXvt7ToDSK4XE+1YcT2DY0QcFvr5af3TdQTF8e2cB3iBZ93ktt/uAWykj4/nzDSU09+W0nFhQURflmowlAnn5X5Z8icx0G+v+npCTED3fFgA4JnKm2PDqcmUB6Z3d5iIYQmeOGKkIUZbPZ3TtoGubg94OBncpH6F8fsXXvygIZDq9eO4sb5MTGTje7iRiEyCwc6z0evNbWiNeOWp0XGwQRov6ZiNeUW9gxSM192S2Q29PmHC0OejgQZmQiQ==&quot;,
        &quot;SigningCertUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/SimpleNotificationService-bb750dd426d95ee9390147a5624348ee.pem&quot;,
        &quot;UnsubscribeUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=arn:aws:sns:us-east-1:876224653878:CTOCronTopic:54ee549e-6874-4028-9826-09759863b22c&quot;,
        &quot;MessageAttributes&quot;: {}
      }
    }
  ]
}</payload>
        <synchronous>true</synchronous>
      </lambdaInvokeBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep>
  </builders>
  <publishers/>
  <buildWrappers/>
</project>
