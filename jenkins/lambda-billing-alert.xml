<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@2.4.0">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <url>https://github.com/SungardAS/aws-services</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>*/develop</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="list"/>
    <extensions/>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <com.cloudbees.jenkins.GitHubPushTrigger plugin="github@1.13.3">
      <spec></spec>
    </com.cloudbees.jenkins.GitHubPushTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>zip -r billingalert_notifier.zip billingalert/index.js lib/flow_controller.js lib/aws</command>
    </hudson.tasks.Shell>
    <com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep plugin="aws-lambda@0.3.0">
      <lambdaUploadBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <artifactLocation>billingalert_notifier.zip</artifactLocation>
        <description>billingalert_notifier</description>
        <functionName>billingalert_notifier</functionName>
        <handler>billingalert/index.handler</handler>
        <memorySize>128</memorySize>
        <role>arn:aws:iam::054649790173:role/lambda_billingalert_notifier</role>
        <runtime>nodejs</runtime>
        <timeout>30</timeout>
        <updateMode>code</updateMode>
      </lambdaUploadBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.upload.LambdaUploadBuildStep>
    <com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep plugin="aws-lambda@0.3.0">
      <lambdaInvokeBuildStepVariables>
        <useInstanceCredentials>true</useInstanceCredentials>
        <awsAccessKeyId></awsAccessKeyId>
        <awsSecretKey></awsSecretKey>
        <awsRegion>us-east-1</awsRegion>
        <functionName>billingalert_notifier</functionName>
        <payload>{
  &quot;Records&quot;: [
    {
      &quot;EventSource&quot;: &quot;aws:sns&quot;,
      &quot;EventVersion&quot;: &quot;1.0&quot;,
      &quot;EventSubscriptionArn&quot;: &quot;arn:aws:sns:us-east-1:054649790173:IncreasedPercentagesTopic:8159ee60-84e6-438a-be32-136f8361c0fc&quot;,
      &quot;Sns&quot;: {
        &quot;Type&quot;: &quot;Notification&quot;,
        &quot;MessageId&quot;: &quot;598410f7-230a-5e95-a475-5ec2f9357673&quot;,
        &quot;TopicArn&quot;: &quot;arn:aws:sns:us-east-1:054649790173:IncreasedPercentagesTopic&quot;,
        &quot;Subject&quot;: &quot;ALARM: \&quot;IncreasedPercentagesAlarm\&quot; in US - N. Virginia&quot;,
        &quot;Message&quot;: &quot;{\&quot;AlarmName\&quot;:\&quot;IncreasedPercentagesAlarm\&quot;,\&quot;AlarmDescription\&quot;:null,\&quot;AWSAccountId\&quot;:\&quot;054649790173\&quot;,\&quot;NewStateValue\&quot;:\&quot;ALARM\&quot;,\&quot;NewStateReason\&quot;:\&quot;Threshold Crossed: 1 datapoint (29149.0) was greater than the threshold (20000.0).\&quot;,\&quot;StateChangeTime\&quot;:\&quot;2015-08-01T03:18:07.385+0000\&quot;,\&quot;Region\&quot;:\&quot;US - N. Virginia\&quot;,\&quot;OldStateValue\&quot;:\&quot;INSUFFICIENT_DATA\&quot;,\&quot;Trigger\&quot;:{\&quot;MetricName\&quot;:\&quot;EstimatedCharges\&quot;,\&quot;Namespace\&quot;:\&quot;AWS/Billing\&quot;,\&quot;Statistic\&quot;:\&quot;MAXIMUM\&quot;,\&quot;Unit\&quot;:\&quot;None\&quot;,\&quot;Dimensions\&quot;:[{\&quot;name\&quot;:\&quot;LinkedAccount\&quot;,\&quot;value\&quot;:\&quot;054649790173\&quot;},{\&quot;name\&quot;:\&quot;Currency\&quot;,\&quot;value\&quot;:\&quot;USD\&quot;}],\&quot;Period\&quot;:60,\&quot;EvaluationPeriods\&quot;:1,\&quot;ComparisonOperator\&quot;:\&quot;GreaterThanThreshold\&quot;,\&quot;Threshold\&quot;:0.0}}&quot;,
        &quot;Timestamp&quot;: &quot;2015-09-28T20:18:07.515Z&quot;,
        &quot;SignatureVersion&quot;: &quot;1&quot;,
        &quot;Signature&quot;: &quot;zkNXuSsbOLqir3Khiw2e/5Fmy8x59IpBHQba4Q77nCbWg21NVFvLjV0TgSvhuk0AiFEQsqD/larWtn/PyOCJBT+kyXl6UsilX30/EYNqfREzF8ZqbfUoG+2TEOu2HwHTnIUDkLVfBUZjFzJ8tUI43wieE/RaeZBZUKhrfIP/q0rpPIf99GyA5tAtxFOdF4jboc56c9w1POh+RA8GdlMd9/H3Rh4CwoRc0jeaEQsf4aHBuKnLlJphQ2Qx3q0GVE/nv9c+QQty0A8v4YkOdpMv9g6aV+LHUDCM865c3iGsU251SNcgB18zTLIBjsJtEWxndAGJAGnPMwYmV5x1DJbDcg==&quot;,
        &quot;SigningCertUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/SimpleNotificationService-d6d679a1d18e95c2f9ffcf11f4f9e198.pem&quot;,
        &quot;UnsubscribeUrl&quot;: &quot;https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=arn:aws:sns:us-east-1:054649790173:IncreasedPercentagesTopic:8159ee60-84e6-438a-be32-136f8361c0fc&quot;,
        &quot;MessageAttributes&quot;: {}
      }
    }
  ]
}
</payload>
        <synchronous>true</synchronous>
      </lambdaInvokeBuildStepVariables>
    </com.xti.jenkins.plugin.awslambda.invoke.LambdaInvokeBuildStep>
  </builders>
  <publishers/>
  <buildWrappers/>
</project>
