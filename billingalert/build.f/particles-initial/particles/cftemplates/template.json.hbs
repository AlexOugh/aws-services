{{#layout}}

  {{parameter "deployer_s3_bucket_postfix" logicalId="DeployerS3BucketPostfix"}}
  {{parameter "deployer_s3_key" logicalId="DeployerS3Key"}}
  {{parameter "deployer_module_name" logicalId="DeployerModuleName"}}
  {{parameter "permission_module_name" logicalId="PermissionModuleName"}}
  {{parameter "streams_module_name" logicalId="StreamsModuleName"}}
  {{parameter "read_capacity_units" logicalId="ReadCapacityUnits"}}
  {{parameter "write_capacity_units" logicalId="WriteCapacityUnits"}}
  {{parameter "dynamodb_table_name_for_streams" logicalId="DynamoDBTableNameForStreams"}}
  {{parameter "is_test" logicalId="IsTest"}}

  {{condition "is_test" logicalId="IsTest"}}

  {{resource "deployer_lambda_function" logicalId="DeployerLambdaFunction"}}
  {{resource "deployer_lambda_execution_role" logicalId="DeployerLambdaExecutionRole"}}
  {{resource "permission_lambda_function" logicalId="PermissionLambdaFunction"}}
  {{resource "dynamodbstreams_lambda_function" logicalId="DynamoDBStreamsLambdaFunction"}}

  {{resource "billing_alerts" logicalId="BillingAlerts"}}
  {{resource "billing_alert_streams_trigger" logicalId="BillingAlertStreamsTrigger"}}
  {{resource "alert_messages_function_role_info" logicalId="AlertMessagesFunctionRoleInfo"}}
  {{resource "alert_messages_function_info" logicalId="AlertMessagesFunctionInfo"}}

  {{resource "billing_alert_notifier_function_info" logicalId="BillingAlertNotifierFunctionInfo"}}
  {{resource "billing_alert_notifier_function_role_info" logicalId="BillingAlertNotifierFunctionRoleInfo"}}
  {{resource "billing_alert_saver_function_info" logicalId="BillingAlertSaverFunctionInfo"}}
  {{resource "billing_alert_saver_function_role_info" logicalId="BillingAlertSaverFunctionRoleInfo"}}

  {{resource "increased_percentages_topic" logicalId="IncreasedPercentagesTopic"}}
  {{resource "over_increased_percentages_topic" logicalId="OverIncreasedPercentagesTopic"}}

  {{resource "billing_alert_notifier_function_permission" logicalId="BillingAlertNotifierFunctionPermission"}}
  {{resource "billing_alert_saver_function_permission" logicalId="BillingAlertSaverFunctionPermission"}}

  {{resource "billing_alert_populator_function_info" logicalId="BillingAlertPopulatorFunctionInfo"}}
  {{resource "billing_alert_populator_function_role_info" logicalId="BillingAlertPopulatorFunctionRoleInfo"}}

  {{output "account_id" logicalId="AccountId"}}
  {{output "stacks_region" logicalId="StacksRegion"}}

  {{output "billing_alert_notifier_function_name" logicalId="BillingAlertNotifierFunctionName"}}
  {{output "billing_alert_notifier_function_arn" logicalId="BillingAlertNotifierFunctionArn"}}
  {{output "billing_alert_notifier_function_role_arn" logicalId="BillingAlertNotifierFunctionRoleArn"}}

  {{output "billing_alert_saver_function_name" logicalId="BillingAlertSaverFunctionName"}}
  {{output "billing_alert_saver_function_arn" logicalId="BillingAlertSaverFunctionArn"}}
  {{output "billing_alert_saver_function_role_arn" logicalId="BillingAlertSaverFunctionRoleArn"}}

  {{output "billing_alert_populator_function_name" logicalId="BillingAlertPopulatorFunctionName"}}
  {{output "billing_alert_populator_function_arn" logicalId="BillingAlertPopulatorFunctionArn"}}
  {{output "billing_alert_populator_function_role_arn" logicalId="BillingAlertPopulatorFunctionRoleArn"}}

  {{output "increased_percentages_topic" logicalId="IncreasedPercentagesTopic"}}
  {{output "over_increased_percentages_topic" logicalId="OverIncreasedPercentagesTopic"}}

  {{output "billing_alert_event_source_arn" logicalId="BillingAlertEventSourceArn"}}
  {{output "alert_messages_function_name" logicalId="AlertMessagesFunctionName"}}
  {{output "alert_messages_function_arn" logicalId="AlertMessagesFunctionArn"}}
  {{output "alert_messages_function_role_arn" logicalId="AlertMessagesFunctionRoleArn"}}

{{/layout}}
