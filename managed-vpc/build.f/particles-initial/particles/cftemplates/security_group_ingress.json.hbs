{{#layout}}
  {{parameter  "security_group/id" logicalId="groupId" }}
  {{parameter  'cidrIp' logicalId="cidrIp" default="0.0.0.0/0"}}
  {{parameter  'fromPortnumber' logicalId="FromPortnumber" }}
  {{parameter  'toPortnumber' logicalId="ToPortnumber" }}
  {{parameter  'ipProtocol' logicalId="IpProtocol" default="tcp"}}

  {{#resource "security_group_ingress" logicalId="SecurityGroupIngress" }}
  "Properties": {
    "FromPort":{"Ref": "FromPortnumber"},
    "IpProtocol":{"Ref": "IpProtocol"},
    "ToPort":{"Ref": "ToPortnumber"},
    "CidrIp":{"Ref": "cidrIp"},
    "GroupId":{"Ref": "groupId"}
   }
{{/resource}}
{{output "m:core" "base" logicalId="SecurityGroupIngressId" value=(ref "SecurityGroupIngress")}}
{{/layout}}

